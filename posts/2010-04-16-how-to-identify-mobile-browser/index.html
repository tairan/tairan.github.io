<!DOCTYPE html>
<html lang="en-us">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">




<title>如何识别手机浏览器信息 | Tairan&#39;s Story</title>

<link rel="stylesheet" href="https://tairan.net//css/styles.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" 
integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/zenburn.min.css" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="https://tairan.net//js/highlight.js"></script>






<div class="container">
    <nav class="navbar level">
      <div class="navbar-brand">
          <a class="nav-item" href="https://tairan.net/"><h1 class="title is-3">Tairan&#39;s Story</h1></a>
      </div>           
      <div class="navbar-menu has-text-centered is-active">
          <div class="navbar-end is-centered">
              
                <a href="https://tairan.net/about.html" rel="me">
                  <span class="icon">
                    <i class="fas fa-info"></i>
                  </span>
                </a>
              
                <a href="https://github.com/tairan" rel="me">
                  <span class="icon">
                    <i class="fab fa-github"></i>
                  </span>
                </a>
              
                <a href="https://www.linkedin.com/in/tairan/" rel="me">
                  <span class="icon">
                    <i class="fab fa-linkedin-in"></i>
                  </span>
                </a>
              
                <a href="https://twitter.com/tairan" rel="me">
                  <span class="icon">
                    <i class="fab fa-twitter"></i>
                  </span>
                </a>
              
           </div>
      </div>
    </nav>
  </div>

<div class="container">
  <h2 class="subtitle is-6">April 16, 2010</h2>
  <h1 class="subtitle is-size-4-mobile is-size-3-desktop">如何识别手机浏览器信息</h1>
  <div class="content">
    <p>想作一个网站，根据不同的访问者提供不同的显示模板，如适合手机的模板，适合PC浏览器的模板。</p>

<p>从哪里识别访问者的信息，以及如何识别呢？</p>

<p>依据 HTTP 协议，客户端浏览网页的时候会提供一些信息给服务器端。下面是PC浏览器访问时的 <a href="http://cn.php.net/manual/en/reserved.variables.server.php" target="_blank">$_SERVER</a> 的 dump 信息。
<pre lang="PHP">
(array) Array
(
    [ALL_HTTP] =&gt; HTTP_CACHE_CONTROL:max-age=0
HTTP_CONNECTION:keep-alive
HTTP_CONTENT_LENGTH:0
HTTP_ACCEPT:application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,<em>/</em>;q=0.5
HTTP_ACCEPT_CHARSET:ISO-8859-1,utf-8;q=0.7,*;q=0.3
HTTP_ACCEPT_ENCODING:gzip,deflate,sdch
HTTP_ACCEPT_LANGUAGE:en-US,en;q=0.8
HTTP_COOKIE:__utmz=259664206.1262318873.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=51xna; __utma=259664206.724256099.1262318873.1262318873.1262318873.1
HTTP_HOST:www.51xna.com
HTTP_USER_AGENT:Mozilla/5.0 (X11; U; Linux i686; en-US) AppleWebKit/533.2 (KHTML, like Gecko) Chrome/5.0.342.9 Safari/533.2</p>

<pre><code>[HTTPS] =&gt; off
[SCRIPT_NAME] =&gt; /private/Kohana/index.php
[HTTP_COOKIE] =&gt; __utmz=259664206.1262318873.1.1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=51xna; __utma=259664206.724256099.1262318873.1262318873.1262318873.1
[AUTH_PASSWORD] =&gt; 
[AUTH_TYPE] =&gt; 
[AUTH_USER] =&gt; 
[CONTENT_LENGTH] =&gt; 0
[CONTENT_TYPE] =&gt; 
[PATH_TRANSLATED] =&gt; g:\wwwroot\51xna.com\wwwroot\mobile\index
[QUERY_STRING] =&gt; 
[REMOTE_ADDR] =&gt; 221.227.130.23
[REMOTE_HOST] =&gt; 221.227.130.23
[REMOTE_USER] =&gt; 
[REQUEST_METHOD] =&gt; GET
[SERVER_NAME] =&gt; www.51xna.com
[SERVER_PORT] =&gt; 80
[SERVER_PROTOCOL] =&gt; HTTP/1.1
[SERVER_SOFTWARE] =&gt; Microsoft-IIS/6.0
[APPL_MD_PATH] =&gt; /LM/w3svc/798/ROOT
[APPL_PHYSICAL_PATH] =&gt; g:\wwwroot\51xna.com\wwwroot\
[INSTANCE_ID] =&gt; 798
[INSTANCE_META_PATH] =&gt; /LM/W3SVC/798
[LOGON_USER] =&gt; 
[REQUEST_URI] =&gt; /private/Kohana/index.php/mobile/index
[URL] =&gt; /private/Kohana/index.php/mobile/index
[SCRIPT_FILENAME] =&gt; g:\wwwroot\51xna.com\wwwroot\private\Kohana\index.php
[ORIG_PATH_INFO] =&gt; /private/Kohana/index.php/mobile/index
[PATH_INFO] =&gt; /mobile/index
[ORIG_PATH_TRANSLATED] =&gt; g:\wwwroot\51xna.com\wwwroot\private\Kohana\index.php\mobile\index
[DOCUMENT_ROOT] =&gt; g:\wwwroot\51xna.com\wwwroot
[PHP_SELF] =&gt; /private/Kohana/index.php
[HTTP_CACHE_CONTROL] =&gt; max-age=0
[HTTP_CONNECTION] =&gt; keep-alive
[HTTP_CONTENT_LENGTH] =&gt; 0
[HTTP_ACCEPT] =&gt; application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
[HTTP_ACCEPT_CHARSET] =&gt; ISO-8859-1,utf-8;q=0.7,*;q=0.3
[HTTP_ACCEPT_ENCODING] =&gt; gzip,deflate,sdch
[HTTP_ACCEPT_LANGUAGE] =&gt; en-US,en;q=0.8
[HTTP_HOST] =&gt; www.51xna.com
[HTTP_USER_AGENT] =&gt; Mozilla/5.0 (X11; U; Linux i686; en-US) AppleWebKit/533.2 (KHTML, like Gecko) Chrome/5.0.342.9 Safari/533.2
[REQUEST_TIME] =&gt; 1271408243
[argv] =&gt; Array
    (
    )

[argc] =&gt; 0
</code></pre>

<p>)
</pre></p>

<p>通常我们可以在HTTP_USER_AGENT中找到识别信息，其中PC浏览器的HTTP_USER_AGENT信息最全，很容易根据关键字来识别如&rsquo;Chrome&rsquo;, &lsquo;Firefox&rsquo; 等，部分手机浏览器也可以可以通过 &lsquo;Windows Mobile&rsquo;, &lsquo;Windows Phone&rsquo;, &lsquo;SymbianOS&rsquo;, &lsquo;Nokia&rsquo;, &lsquo;Opera Mobi&rsquo;, &lsquo;Android&rsquo;等关键字识别，这里有一个手机HTTP_USER_AGENT识别列表<a href="http://www.zytrax.com/tech/web/mobile_ids.html" target="_blank"><a href="http://www.zytrax.com/tech/web/mobile_ids.html">http://www.zytrax.com/tech/web/mobile_ids.html</a></a>。但是有些手机上的浏览器并不提供HTTP_USER_AGENT信息。</p>

<p>如今的智能手机大多都支持 XHTML 格式浏览，我们可以通过 HTTP_ACCEPT 来识别手机是否支持 XHTML 格式浏览。这里识别的关键字主要是 &lsquo;application/xhtml+xml&rsquo;。</p>

<p>另外还有一种识别方式，通过查找用户的上网方式，通常手机用户走的是 GPRS 路线，但是这中识别方式并不可靠，可以作为一种辅助识别手段。</p>

<p>对于只支持 WML 的手机目前我还没有解决，一些非智能手机在访问网站时会提示&rdquo;不支持所访问的网站&rdquo;。开始我以为是返回信息的问题，当我把返回信息严格按照WML格式输出时问题依然存在。不知道这种手机是通过什么方式访问互联网的。</p>

<p>为所有用户提供不同的定制服务是一件不可能的完成任务，支持大多数就好。完美主义总是很浪费时间。</p>

<p>最后感谢各位提供手机访问信息的童鞋们，让你们忍受在手机上输入如此之长的URL，实在辛苦！</p>

  </div>
</div>
<div class="container has-text-centered">
    
</div>

<div class="container has-text-centered">
  
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      (function() {
          
          
          if (window.location.hostname == "localhost")
              return;
      
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          var disqus_shortname = 'tairan';
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  
</div>
<section class="section">
  <div class="container has-text-centered">
    <p>&copy; Copyright 2019 Tairan Wang</p>
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5226610-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



